[
  {
    "objectID": "comparison-basiccolor.html",
    "href": "comparison-basiccolor.html",
    "title": "Comparison with BasICColor",
    "section": "",
    "text": "It is now interesting to compare the output of our computations with the report produced by BasICColor Input6 Pro.\n\nfrom colorchecker2cielab import extract_color_patches, read_target_data, read_basiccolor_data, RGBs_to_LABs, compute_deltaEs\nimport pandas as pd\n\n\ntarget_data = '/home/frank/Work/DATA/colorchecker2cielab-data/AG_003_20221230_2.txt' \nbcol_data = '/home/frank/Work/DATA/colorchecker2cielab-data/BasiCColor_sk-c-1833.xlsx'\ntif_file = '/home/frank/Work/DATA/colorchecker2cielab-data/sk-C-1833_135MB.tif'\n\n\nbcol_df = read_basiccolor_data(bcol_data)\nbcol_LABs = bcol_df.loc[:, ['bcol_L*', 'bcol_a*', 'bcol_b*']]\nprint('BasICColor report: \\n')\nprint(bcol_df.to_string())\n\nBasICColor report: \n\n     bcol_R  bcol_G  bcol_B  ref_L*  ref_a*  ref_b*  bcol_L*  bcol_a*  bcol_b*  bcol_ΔE*00_(SL=1)  bcol_Δab*\nA1    95.58   95.78   94.15   95.35   -0.75    2.56    95.59    -0.27     2.76               0.77       0.73\nB1    49.25   49.46   49.12   49.51   -0.53    0.38    49.37     0.09     0.88               1.05       1.04\nC1     7.83    7.53    7.47    8.59    0.26   -0.70     7.62     0.94     0.75               1.97       1.72\nD1    95.86   96.18   94.72   95.62   -0.80    2.35    95.97    -0.40     2.45               0.68       0.59\nE1    49.26   49.50   49.12   49.53   -0.54    0.41    49.39     0.04     0.91               1.00       0.99\nF1     7.51    7.22    7.19    8.47    0.16   -0.86     7.31     0.95     0.71               2.24       1.91\nG1    95.74   96.09   94.66   95.50   -0.82    2.40    95.87    -0.43     2.39               0.67       0.56\nH1    49.25   49.48   49.16   49.53   -0.54    0.44    49.38     0.06     0.84               0.98       0.97\nI1     7.39    7.25    7.10    8.44    0.27   -0.82     7.28     0.68     0.80               2.05       1.69\nJ1    95.85   96.21   94.80   95.63   -0.81    2.34    95.99    -0.45     2.35               0.64       0.52\nK1    49.22   49.45   49.20   49.46   -0.55    0.34    49.36     0.08     0.74               1.01       1.01\nL1     7.80    7.43    7.11    9.55    0.36   -0.45     7.52     0.96     1.17               2.70       1.79\nM1    49.28   49.53   49.30   49.37   -0.53    0.33    49.43     0.05     0.70               0.94       0.94\nN1    95.61   95.94   94.46   95.34   -0.80    2.46    95.72    -0.40     2.47               0.69       0.57\nA2     7.61    7.43    7.41    9.05    0.24   -0.89     7.49     0.76     0.63               2.28       1.67\nB2    51.49   12.40   40.06   33.06   51.60  -10.48    34.12    51.16    -7.41               1.77       1.42\nC2    25.45   15.27   32.13   19.99   20.10  -18.86    20.81    19.04   -17.39               1.19       0.86\nD2    82.13   84.39   89.30   83.60   -2.18   -8.35    84.08    -1.49    -7.86               1.03       0.90\nE2    39.78   27.31   18.96   32.14   19.46   22.48    31.59    18.19    20.92               1.04       0.89\nF2    73.97   60.56   53.21   63.36   20.01   19.98    64.89    19.61    19.56               1.55       0.26\nG2    40.02   46.48   61.60   45.82   -3.99  -25.32    46.09    -3.28   -24.55               0.82       0.78\nH2    33.81   41.24   18.69   38.10  -16.74   29.18    37.80   -16.61    28.31               0.49       0.39\nI2    51.00   48.75   68.09   51.22    9.39  -27.35    51.38     9.98   -26.22               1.11       1.10\nJ2    53.85   75.36   68.56   68.08  -35.24   -0.89    69.05   -34.50     0.30               1.28       0.83\nK2    91.30   82.67   73.62   84.76   10.96   17.84    84.99    11.81    18.76               0.74       0.71\nL2    35.99   10.06   16.77   21.66   35.94    9.72    22.80    35.46    11.71               1.73       1.30\nM2    66.57   15.87   37.71   42.18   63.63   11.97    43.61    63.35    12.77               1.48       0.40\nN2    49.35   49.59   49.36   49.42   -0.54    0.39    49.49     0.06     0.70               0.94       0.94\nA3    49.20   49.42   49.08   49.49   -0.56    0.33    49.32     0.07     0.88               1.09       1.08\nB3    68.93   54.13   72.66   60.96   26.65  -18.39    61.08    26.79   -17.39               0.62       0.60\nC3    42.48   35.82   63.54   41.38   18.14  -36.85    41.18    18.79   -35.43               1.19       1.18\nD3    90.56   81.79   85.07   84.50   14.49    0.52    85.01    14.67     0.86               0.58       0.27\nE3    79.13   52.12   17.70   61.35   37.18   68.91    61.70    38.06    66.80               1.15       1.10\nF3    28.52   30.27   65.26   34.80   11.99  -51.74    34.60    13.18   -49.34               1.86       1.85\nG3    69.60   30.85   35.76   47.29   53.15   22.33    48.92    53.99    23.92               1.79       0.74\nH3    29.49    9.38   38.85   21.60   32.81  -28.91    21.52    31.89   -27.10               0.82       0.81\nI3    65.96   74.99   28.06   70.39  -25.76   64.39    70.02   -23.20    59.42               1.47       1.42\nJ3    80.27   65.36   14.43   69.68   18.58   78.96    68.91    18.22    76.09               1.01       0.65\nK3    83.22   92.60   85.41   88.42  -17.05    6.35    89.22   -16.09     6.01               1.03       0.65\nL3    71.88   15.86   15.28   44.00   66.29   51.04    46.08    67.84    53.72               2.24       0.85\nM3    30.21    5.92   25.17   19.20   34.85   -7.48    19.08    33.78    -8.32               0.70       0.69\nN3     7.84    7.39    7.32    8.69    0.32   -0.71     7.53     1.17     0.85               2.26       1.94\nA4    95.90   96.22   94.83   95.57   -0.80    2.24    96.01    -0.38     2.35               0.76       0.62\nB4    41.95    4.49   54.59   29.88   50.17  -41.86    29.52    48.86   -39.52               0.90       0.83\nC4    11.31   21.36   41.95   21.10   -1.20  -34.33    21.57    -1.83   -32.72               0.62       0.40\nD4    76.33   88.22   84.84   83.97  -19.35   -1.10    84.44   -18.79    -0.68               0.66       0.46\nE4    10.95    9.89   51.53   19.29   23.34  -59.46    18.38    20.95   -53.77               1.82       1.58\nF4    39.68   60.95   27.98   51.70  -44.14   39.12    53.53   -42.16    36.55               2.06       0.93\nG4    63.68    3.66   14.85   37.28   65.62   42.67    39.19    65.61    43.82               1.98       0.52\nH4    87.62   80.35   20.03   80.85    2.30   88.86    80.50     4.13    83.00               1.69       1.65\nI4    67.11   28.83   57.07   48.07   56.26  -14.81    48.51    55.11   -11.60               1.45       1.38\nJ4    24.38   53.61   67.62   46.67  -32.13  -30.93    48.60   -30.66   -30.72               2.02       0.61\nK4    85.37   82.98   88.43   83.82    5.10   -6.02    84.20     5.64    -6.09               0.71       0.60\nL4    74.90   51.74   59.01   60.42   35.97    3.89    61.22    36.00     5.28               1.16       0.83\nM4    67.61   11.52   24.50   41.17   65.74   33.22    42.96    66.18    33.79               1.80       0.22\nN4    96.01   96.43   95.27   95.60   -0.82    2.23    96.21    -0.46     1.96               0.82       0.56\nA5     7.61    7.53    7.54    8.47    0.30   -0.70     7.56     0.62     0.53               1.58       1.29\nB5    31.69   51.44   79.33   49.04  -13.81  -49.04    49.94   -11.55   -47.41               1.66       1.40\nC5    46.36   63.27   80.41   59.80  -17.93  -31.89    60.47   -16.48   -31.96               1.05       0.80\nD5    90.57   81.87   80.04   84.45   13.18    7.80    84.69    13.40     8.28               0.42       0.35\nE5    95.76   96.18   95.03   95.65   -0.85    2.11    95.96    -0.47     1.93               0.64       0.56\nF5    78.65   78.62   78.50   78.75   -0.08    0.35    78.62     0.51     0.68               0.94       0.93\nG5    64.51   64.78   64.84   64.83   -0.45   -0.33    64.70     0.11     0.26               1.02       1.01\nH5    49.14   49.36   49.09   49.28   -0.54    0.35    49.27     0.09     0.78               1.02       1.02\nI5    34.61   34.87   34.69   34.37   -0.44    0.00    34.77     0.06     0.62               1.04       0.96\nJ5    15.31   15.80   16.23   15.18   -0.88   -1.12    15.68    -0.14    -0.39               1.36       1.26\nK5    77.26   86.09   88.99   82.98  -12.66   -8.83    83.67   -12.01    -8.31               0.89       0.57\nL5    77.59   53.20   51.81   61.75   37.11   17.62    62.64    36.59    19.04               1.33       0.98\nM5    82.55   27.74   23.67   53.63   67.17   50.15    55.25    70.77    54.54               2.09       1.31\nN5    49.32   49.52   49.27   49.37   -0.52    0.33    49.44     0.12     0.75               1.03       1.03\nA6    49.14   49.37   49.09   49.44   -0.54    0.31    49.28     0.07     0.78               1.03       1.02\nB6    41.41   65.99   77.08   60.10  -30.10  -26.67    60.92   -29.42   -26.07               0.88       0.33\nC6    10.06   26.16   33.61   21.55  -17.05  -17.59    23.21   -17.59   -16.59               1.82       0.75\nD6    81.93   85.49   66.38   83.32  -11.78   26.26    83.11    -9.79    26.14               1.44       1.42\nE6     9.13    8.52    8.11    8.76    0.43   -0.29     8.69     1.33     1.44               2.08       2.08\nF6    30.00   29.91   29.75   29.30    0.13    0.28    29.93     0.59     0.78               1.03       0.82\nG6    39.45   39.66   39.38   39.19   -0.49    0.25    39.57     0.09     0.80               1.08       1.01\nH6    59.92   59.98   60.09   59.75   -0.17   -0.19    59.97     0.44     0.30               1.05       1.03\nI6    74.29   74.17   74.32   74.59    0.21   -0.09    74.22     0.72     0.35               0.93       0.86\nJ6    87.02   87.63   87.98   87.36   -0.86   -0.35    87.46    -0.33    -0.36               0.77       0.76\nK6    69.58   69.78   70.07   69.99   -0.24   -0.52    69.74     0.27    -0.03               0.94       0.91\nL6    87.71   50.31   13.46   63.63   51.26   79.10    65.17    52.58    78.34               1.74       0.81\nM6    94.56   75.20   20.43   81.85   22.67   85.56    80.31    24.72    85.09               1.94       1.19\nN6     8.46    7.78    7.43    8.88    0.37   -0.59     7.97     1.45     1.38               2.59       2.42\nA7    95.50   95.83   94.41   95.44   -0.85    2.37    95.62    -0.40     2.38               0.67       0.64\nB7     7.22   26.49   26.94   18.23  -25.24   -7.58    22.33   -25.56    -7.41               4.11       0.22\nC7    52.19   60.69   80.23   59.96   -5.50  -32.60    60.19    -4.45   -31.90               0.93       0.90\nD7    75.86   54.45   40.36   61.97   29.60   36.28    61.90    30.91    35.30               1.12       1.12\nE7    85.66   70.90   60.95   75.73   19.54   22.65    75.54    21.25    24.16               1.01       0.99\nF7    70.79   60.71   47.97   62.78   13.06   26.02    63.45    13.62    25.14               1.02       0.78\nG7    47.43   36.35   23.89   43.65   15.72   26.96    39.72    15.57    25.60               3.99       0.69\nH7    74.25   64.26   57.63   66.86   13.99   16.71    67.29    14.45    16.19               0.75       0.62\nI7    57.46   39.13   19.70   44.81   25.79   40.65    45.39    26.04    40.72               0.60       0.13\nJ7    74.65   57.15   46.96   63.42   25.00   26.80    63.03    25.48    26.65               0.52       0.34\nK7    45.11   45.12   44.63   44.45   -0.12    0.63    45.08     0.34     1.20               1.08       0.88\nL7    71.69   73.02    0.00   72.21  -11.41   87.21    70.21   -10.64    82.71               2.21       0.94\nM7    87.41   78.57    0.26   81.23    5.33   95.11    79.22     6.55    94.00               2.14       0.72\nN7    95.93   96.27   95.03   95.64   -0.80    2.24    96.06    -0.36     2.11               0.77       0.64\nA8     7.66    7.64    7.48    8.42    0.29   -0.77     7.63     0.49     0.75               1.71       1.51\nB8    38.35   67.96   68.59   59.18  -40.97  -13.40    60.90   -41.66   -12.72               1.80       0.54\nC8    24.31   60.81   59.44   49.75  -48.87  -11.43    52.90   -49.61   -11.02               3.17       0.38\nD8    73.96   60.32   53.98   63.44   20.85   18.90    64.80    20.13    18.25               1.43       0.44\nE8    86.56   65.83   57.33   73.40   29.02   25.35    73.04    30.53    26.36               0.76       0.67\nF8    71.01   61.19   53.18   63.79   13.74   17.48    64.08    13.97    18.10               0.46       0.35\nG8    72.54   61.56   54.89   64.25   15.57   16.61    64.97    16.00    16.91               0.78       0.29\nH8    73.29   61.89   54.34   64.35   16.61   18.82    65.41    16.49    18.48               1.08       0.19\nI8    43.75   32.70   19.56   35.64   16.70   27.67    36.09    15.51    26.57               0.87       0.75\nJ8    76.64   60.92   48.96   65.83   21.96   28.22    65.93    22.51    27.88               0.50       0.49\nK8    20.75   20.96   20.66   20.24   -0.10    0.42    20.87     0.11     0.82               0.80       0.49\nL8    65.93   60.72   24.14   61.58    2.86   56.24    60.80     3.01    54.05               1.01       0.65\nM8    68.70   73.85   10.98   71.57  -18.77   77.61    69.85   -17.22    75.26               1.88       0.77\nN8    49.25   49.48   49.22   49.31   -0.53    0.35    49.38     0.07     0.75               0.98       0.97\nA9    48.88   49.13   48.90   49.34   -0.54    0.35    49.03     0.05     0.70               0.98       0.93\nB9    21.49   20.14   11.20   19.10    1.60   12.31    20.05     0.76    14.15               1.92       1.66\nC9    46.16   67.82   47.05   59.68  -40.69   19.57    60.69   -39.73    20.21               1.15       0.56\nD9    29.99   60.62   41.79   50.40  -53.33   13.94    52.18   -52.09    14.96               1.92       0.71\nE9    12.87   26.29   18.45   20.57  -23.24    5.67    22.35   -22.64     5.90               1.82       0.38\nF9    42.77   68.28   55.37   59.26  -43.65    7.36    60.84   -42.75     7.82               1.64       0.45\nG9    52.24   64.82   32.48   59.79  -29.07   39.25    59.39   -27.34    39.44               0.94       0.85\nH9    35.07   59.64   18.70   50.73  -49.58   43.54    51.42   -48.91    44.55               0.86       0.51\nI9    43.97   70.17   28.04   60.99  -54.10   46.27    61.24   -52.15    46.30               0.68       0.64\nJ9    70.36   57.24   27.76   61.30   16.26   51.36    60.60    16.76    50.34               0.92       0.59\nK9    59.46   63.57   23.02   61.68  -14.73   53.90    60.38   -13.52    53.46               1.47       0.67\nL9    64.90   76.22   12.87   72.26  -29.51   71.44    70.34   -28.45    73.38               2.11       0.87\nM9    29.20   19.94   10.69   20.74   13.45   16.79    22.93    13.32    19.92               3.01       2.06\nN9     8.20    7.91    7.63    9.18    0.36   -0.68     7.98     0.88     1.07               2.21       1.85\nA10   95.08   95.42   93.99   95.45   -0.82    2.31    95.20    -0.42     2.40               0.64       0.59\nB10   48.97   49.23   48.95   49.47   -0.54    0.33    49.12     0.02     0.76               0.99       0.93\nC10    7.72    7.69    7.41    8.50    0.31   -0.47     7.67     0.48     0.91               1.61       1.38\nD10   95.32   95.69   94.43   95.59   -0.82    2.21    95.48    -0.42     2.13               0.58       0.57\nE10   49.02   49.25   49.04   49.31   -0.53    0.32    49.16     0.09     0.67               0.99       0.98\nF10    7.97    7.80    7.56    8.48    0.35   -0.61     7.84     0.69     0.95               1.72       1.59\nG10   95.34   95.65   94.33   95.49   -0.80    2.27    95.45    -0.34     2.25               0.66       0.66\nH10   49.13   49.36   49.10   49.36   -0.54    0.36    49.27     0.09     0.75               1.01       1.01\nI10    8.17    7.92    7.54    9.01    0.38   -0.30     7.97     0.80     1.20               1.88       1.57\nJ10   95.57   95.93   94.75   95.59   -0.81    2.19    95.72    -0.37     2.01               0.66       0.65\nK10   49.14   49.36   49.09   49.38   -0.50    0.35    49.27     0.09     0.76               0.97       0.96\nL10    8.22    7.98    7.49    9.15    0.49   -0.35     8.02     0.75     1.34               2.03       1.68\nM10   49.14   49.37   49.18   49.43   -0.54    0.31    49.28     0.10     0.64               1.02       1.00\nN10   95.39   95.69   94.44   95.36   -0.79    2.31    95.50    -0.31     2.16               0.72       0.70\n\n\nIn the table above we see on the left the bcol_RGB columns. These are the RGB values that were extracted from the TIF image of the target by BasICColor. Next we find the ref_L*a*b* columns. These are the measured CIELAB values that are tabulated for this specific Colorchecker target. Next we see the bcol_L*a*b* values that are computed by BasICColor from the extracted RGB values for all color patches. Finally on the right we find two deltaE columns that indicate the color differences between the reference CIELAB values and the computed CIELAB values. The bcol_ΔE*00_(SL=1) indicates the deltaE CIE2000 color difference that has been adapted by setting SL to 1. Not sure yet how this choice has been motivated. The last column most probably indicates the CIE1976 deltaE color difference.\nNow let’s create a similar report table using the colorchecker2cielab functions.\n\nrectangles, RGBs = extract_color_patches(tif_file, make_plot=False) \nref_LABs = read_target_data(target_data) \nLABs = RGBs_to_LABs(RGBs)\ndeltas = compute_deltaEs(ref_LABs, LABs)\n\n\nreport = pd.concat([RGBs*100, deltas], axis=1)\n\n\nprint('Colorchecker2cielab report: \\n')\nprint(report.to_string())\n\nColorchecker2cielab report: \n\n        R     G     B  ref_L*  ref_a*  ref_b*    L*     a*     b*  dE_2000  dE_1976\nA1  95.54 95.76 94.14   95.35   -0.75    2.56 95.56  -0.76   2.22     0.33     0.40\nB1  49.27 49.46 49.14   49.51   -0.53    0.38 49.37  -0.39   0.36     0.24     0.20\nC1   7.92  7.64  7.57    8.59    0.26   -0.70  7.72   0.42   0.26     1.11     1.30\nD1  95.85 96.18 94.72   95.62   -0.80    2.35 95.96  -0.89   1.92     0.46     0.55\nE1  49.25 49.45 49.12   49.53   -0.54    0.41 49.36  -0.41   0.37     0.26     0.22\nF1   7.62  7.31  7.26    8.47    0.16   -0.86  7.41   0.45   0.24     1.34     1.56\nG1  95.71 96.07 94.64   95.50   -0.82    2.40 95.85  -0.95   1.88     0.56     0.64\nH1  49.24 49.47 49.15   49.53   -0.54    0.44 49.37  -0.44   0.34     0.24     0.22\nI1   7.48  7.34  7.21    8.44    0.27   -0.82  7.38   0.17   0.26     1.26     1.52\nJ1  95.78 96.13 94.73   95.63   -0.81    2.34 95.91  -0.92   1.84     0.52     0.59\nK1  49.25 49.48 49.20   49.46   -0.55    0.34 49.38  -0.42   0.28     0.21     0.16\nL1   7.86  7.48  7.19    9.55    0.36   -0.45  7.58   0.50   0.63     1.63     2.25\nM1  49.28 49.53 49.29   49.37   -0.53    0.33 49.43  -0.45   0.21     0.18     0.16\nN1  95.60 95.93 94.46   95.34   -0.80    2.46 95.71  -0.90   1.94     0.55     0.64\nA2   7.67  7.46  7.41    9.05    0.24   -0.89  7.52   0.31   0.18     1.42     1.87\nB2  51.49 12.40 40.05   33.06   51.60  -10.48 34.13  50.45  -7.86     1.49     3.06\nC2  25.49 15.29 32.17   19.99   20.10  -18.86 20.85  18.47 -17.83     1.11     2.11\nD2  82.14 84.40 89.30   83.60   -2.18   -8.35 84.09  -2.00  -8.32     0.40     0.52\nE2  39.79 27.31 18.98   32.14   19.46   22.48 31.60  17.65  20.30     1.33     2.88\nF2  73.95 60.57 53.21   63.36   20.01   19.98 64.88  19.02  18.97     1.42     2.08\nG2  40.03 46.47 61.57   45.82   -3.99  -25.32 46.09  -3.78 -24.90     0.39     0.54\nH2  33.80 41.24 18.73   38.10  -16.74   29.18 37.79 -17.03  27.62     0.87     1.62\nI2  51.00 48.74 68.09   51.22    9.39  -27.35 51.38   9.44 -26.60     0.53     0.77\nJ2  53.78 75.32 68.54   68.08  -35.24   -0.89 69.01 -34.89  -0.23     0.86     1.19\nK2  91.30 82.66 73.62   84.76   10.96   17.84 84.98  11.28  18.18     0.31     0.52\nL2  36.04 10.13 16.83   21.66   35.94    9.72 22.84  34.82  11.15     1.39     2.17\nM2  66.54 15.89 37.71   42.18   63.63   11.97 43.59  62.58  12.20     1.34     1.77\nN2  49.33 49.57 49.34   49.42   -0.54    0.39 49.47  -0.43   0.20     0.26     0.23\nA3  49.17 49.38 49.07   49.49   -0.56    0.33 49.29  -0.40   0.34     0.30     0.25\nB3  68.90 54.10 72.66   60.96   26.65  -18.39 61.06  26.19 -17.85     0.32     0.71\nC3  42.50 35.81 63.57   41.38   18.14  -36.85 41.20  18.23 -35.79     0.68     1.08\nD3  90.52 81.74 85.05   84.50   14.49    0.52 84.97  14.12   0.33     0.44     0.63\nE3  79.05 52.07 17.75   61.35   37.18   68.91 61.62  37.39  65.87     1.15     3.06\nF3  28.58 30.28 65.28   34.80   11.99  -51.74 34.65  12.62 -49.61     1.36     2.23\nG3  69.53 30.85 35.74   47.29   53.15   22.33 48.88  53.23  23.29     1.64     1.86\nH3  29.48  9.43 38.86   21.60   32.81  -28.91 21.54  31.19 -27.46     0.75     2.17\nI3  65.98 74.98 28.05   70.39  -25.76   64.39 70.01 -23.55  58.67     1.57     6.14\nJ3  80.23 65.33 14.46   69.68   18.58   78.96 68.86  17.67  75.18     1.06     3.97\nK3  83.23 92.60 85.38   88.42  -17.05    6.35 89.22 -16.52   5.53     0.80     1.26\nL3  71.83 15.90 15.28   44.00   66.29   51.04 46.04  67.03  52.94     2.04     2.89\nM3  30.27  6.00 25.22   19.20   34.85   -7.48 19.14  33.14  -8.78     1.08     2.15\nN3   7.94  7.48  7.41    8.69    0.32   -0.71  7.62   0.68   0.36     1.34     1.55\nA4  95.86 96.18 94.82   95.57   -0.80    2.24 95.97  -0.85   1.79     0.49     0.60\nB4  41.97  4.57 54.57   29.88   50.17  -41.86 29.55  48.09 -39.77     0.81     2.96\nC4  11.40 21.38 41.95   21.10   -1.20  -34.33 21.61  -2.32 -33.02     0.68     1.80\nD4  76.32 88.23 84.86   83.97  -19.35   -1.10 84.45 -19.22  -1.21     0.34     0.51\nE4  10.94  9.91 51.48   19.29   23.34  -59.46 18.40  20.23 -53.94     1.48     6.39\nF4  39.65 60.91 27.98   51.70  -44.14   39.12 53.49 -42.45  35.84     2.10     4.10\nG4  63.65  3.76 14.92   37.28   65.62   42.67 39.18  64.81  43.00     1.68     2.09\nH4  87.65 80.34 20.16   80.85    2.30   88.86 80.49   3.73  82.02     1.70     6.99\nI4  67.11 28.87 57.08   48.07   56.26  -14.81 48.52  54.36 -12.03     1.31     3.40\nJ4  24.32 53.60 67.59   46.67  -32.13  -30.93 48.59 -31.13 -31.06     1.94     2.17\nK4  85.39 82.99 88.44   83.82    5.10   -6.02 84.21   5.12  -6.56     0.50     0.66\nL4  74.87 51.72 58.99   60.42   35.97    3.89 61.20  35.36   4.75     0.90     1.31\nM4  67.62 11.60 24.56   41.17   65.74   33.22 42.97  65.42  33.08     1.63     1.83\nN4  96.00 96.41 95.24   95.60   -0.82    2.23 96.19  -0.95   1.47     0.82     0.97\nA5   7.66  7.56  7.60    8.47    0.30   -0.70  7.59   0.16  -0.00     0.90     1.13\nB5  31.68 51.44 79.33   49.04  -13.81  -49.04 49.95 -12.06 -47.67     1.42     2.40\nC5  46.40 63.26 80.39   59.80  -17.93  -31.89 60.48 -16.87 -32.28     0.87     1.32\nD5  90.56 81.86 80.03   84.45   13.18    7.80 84.68  12.86   7.75     0.29     0.40\nE5  95.79 96.21 95.08   95.65   -0.85    2.11 95.99  -0.95   1.40     0.71     0.79\nF5  78.61 78.59 78.48   78.75   -0.08    0.35 78.58   0.00   0.17     0.25     0.26\nG5  64.48 64.76 64.81   64.83   -0.45   -0.33 64.67  -0.41  -0.22     0.18     0.19\nH5  49.15 49.36 49.09   49.28   -0.54    0.35 49.27  -0.39   0.28     0.22     0.16\nI5  34.62 34.88 34.70   34.37   -0.44    0.00 34.78  -0.45   0.12     0.36     0.43\nJ5  15.38 15.90 16.34   15.18   -0.88   -1.12 15.77  -0.66  -0.92     0.53     0.66\nK5  77.24 86.06 88.97   82.98  -12.66   -8.83 83.65 -12.44  -8.77     0.48     0.71\nL5  77.53 53.18 51.74   61.75   37.11   17.62 62.59  35.89  18.50     1.16     1.72\nM5  82.61 27.81 23.59   53.63   67.17   50.15 55.30  70.03  54.01     1.98     5.08\nN5  49.31 49.53 49.28   49.37   -0.52    0.33 49.44  -0.40   0.25     0.20     0.16\nA6  49.10 49.33 49.06   49.44   -0.54    0.31 49.24  -0.43   0.27     0.26     0.24\nB6  41.44 65.96 77.09   60.10  -30.10  -26.67 60.91 -29.73 -26.49     0.72     0.91\nC6  10.19 26.18 33.70   21.55  -17.05  -17.59 23.25 -17.86 -17.08     1.38     1.95\nD6  81.90 85.44 66.34   83.32  -11.78   26.26 83.06 -10.21  25.52     1.08     1.75\nE6   9.19  8.59  8.17    8.76    0.43   -0.29  8.76   0.81   0.95     1.32     1.30\nF6  30.01 29.92 29.76   29.30    0.13    0.28 29.94   0.09   0.28     0.49     0.64\nG6  39.47 39.67 39.37   39.19   -0.49    0.25 39.58  -0.39   0.31     0.38     0.41\nH6  59.91 59.97 60.07   59.75   -0.17   -0.19 59.96  -0.06  -0.18     0.25     0.24\nI6  74.26 74.15 74.31   74.59    0.21   -0.09 74.20   0.21  -0.17     0.30     0.40\nJ6  86.91 87.53 87.87   87.36   -0.86   -0.35 87.36  -0.86  -0.84     0.47     0.49\nK6  69.57 69.76 70.05   69.99   -0.24   -0.52 69.72  -0.21  -0.53     0.21     0.27\nL6  87.67 50.31 13.46   63.63   51.26   79.10 65.14  51.87  77.47     1.47     2.31\nM6  94.53 75.19 20.37   81.85   22.67   85.56 80.28  24.14  84.24     1.48     2.52\nN6   8.56  7.90  7.52    8.88    0.37   -0.59  8.09   0.90   0.92     1.72     1.78\nA7  95.45 95.79 94.37   95.44   -0.85    2.37 95.57  -0.90   1.86     0.49     0.53\nB7   7.34 26.47 26.99   18.23  -25.24   -7.58 22.34 -25.77  -7.94     2.87     4.16\nC7  52.17 60.66 80.21   59.96   -5.50  -32.60 60.17  -4.92 -32.26     0.52     0.70\nD7  75.88 54.46 40.38   61.97   29.60   36.28 61.91  30.33  34.64     1.15     1.80\nE7  85.68 70.90 60.97   75.73   19.54   22.65 75.54  20.72  23.54     0.68     1.49\nF7  70.67 60.63 47.90   62.78   13.06   26.02 63.35  13.04  24.48     0.95     1.64\nG7  47.44 36.34 23.92   43.65   15.72   26.96 39.72  15.07  24.95     3.67     4.46\nH7  74.26 64.25 57.64   66.86   13.99   16.71 67.28  13.96  15.60     0.81     1.18\nI7  57.41 39.08 19.69   44.81   25.79   40.65 45.34  25.45  39.99     0.55     0.91\nJ7  74.67 57.14 46.97   63.42   25.00   26.80 63.03  24.93  26.02     0.54     0.87\nK7  45.13 45.13 44.66   44.45   -0.12    0.63 45.10  -0.13   0.68     0.61     0.65\nL7  71.63 72.98  0.00   72.21  -11.41   87.21 70.15 -11.09  81.78     1.94     5.81\nM7  87.41 78.55  0.46   81.23    5.33   95.11 79.20   6.09  92.96     1.54     3.06\nN7  95.82 96.14 94.90   95.64   -0.80    2.24 95.94  -0.82   1.61     0.61     0.70\nA8   7.70  7.69  7.54    8.42    0.29   -0.77  7.68  -0.02   0.21     1.17     1.27\nB8  38.37 67.95 68.58   59.18  -40.97  -13.40 60.90 -41.98 -13.15     1.58     2.01\nC8  24.34 60.80 59.45   49.75  -48.87  -11.43 52.91 -49.89 -11.48     3.16     3.32\nD8  74.01 60.33 54.02   63.44   20.85   18.90 64.82  19.63  17.65     1.40     2.23\nE8  86.55 65.81 57.33   73.40   29.02   25.35 73.02  29.96  25.73     0.50     1.08\nF8  70.97 61.17 53.15   63.79   13.74   17.48 64.05  13.40  17.53     0.36     0.43\nG8  72.55 61.55 54.89   64.25   15.57   16.61 64.97  15.46  16.35     0.61     0.77\nH8  73.28 61.88 54.34   64.35   16.61   18.82 65.40  15.95  17.88     1.03     1.56\nI8  43.71 32.71 19.56   35.64   16.70   27.67 36.08  14.89  25.93     1.21     2.55\nJ8  76.59 60.88 48.93   65.83   21.96   28.22 65.88  21.92  27.22     0.54     1.00\nK8  20.76 20.97 20.66   20.24   -0.10    0.42 20.88  -0.41   0.33     0.65     0.72\nL8  65.89 60.70 24.15   61.58    2.86   56.24 60.77   2.51  53.26     1.12     3.11\nM8  68.71 73.84 11.05   71.57  -18.77   77.61 69.84 -17.60  74.36     1.54     3.86\nN8  49.23 49.46 49.21   49.31   -0.53    0.35 49.37  -0.42   0.24     0.20     0.17\nA9  48.89 49.13 48.91   49.34   -0.54    0.35 49.04  -0.43   0.19     0.38     0.36\nB9  21.50 20.14 11.24   19.10    1.60   12.31 20.06   0.29  13.53     2.03     2.03\nC9  46.16 67.82 47.07   59.68  -40.69   19.57 60.68 -40.05  19.59     0.91     1.19\nD9  29.94 60.58 41.78   50.40  -53.33   13.94 52.14 -52.38  14.36     1.78     2.02\nE9  12.96 26.30 18.47   20.57  -23.24    5.67 22.38 -22.94   5.39     1.29     1.85\nF9  42.83 68.32 55.36   59.26  -43.65    7.36 60.87 -43.06   7.34     1.43     1.72\nG9  52.25 64.81 32.51   59.79  -29.07   39.25 59.38 -27.68  38.72     0.69     1.55\nH9  35.06 59.59 18.69   50.73  -49.58   43.54 51.37 -49.13  43.81     0.68     0.83\nI9  44.01 70.19 28.02   60.99  -54.10   46.27 61.26 -52.41  45.63     0.53     1.83\nJ9  70.33 57.22 27.76   61.30   16.26   51.36 60.56  16.21  49.58     0.88     1.92\nK9  59.45 63.54 23.01   61.68  -14.73   53.90 60.35 -13.93  52.70     1.25     1.96\nL9  64.93 76.22 12.84   72.26  -29.51   71.44 70.34 -28.77  72.57     1.57     2.35\nM9  29.21 19.96 10.70   20.74   13.45   16.79 22.94  12.77  19.35     2.52     3.44\nN9   8.25  7.93  7.68    9.18    0.36   -0.68  8.01   0.43   0.53     1.39     1.68\nA10 95.06 95.41 93.98   95.45   -0.82    2.31 95.19  -0.91   1.87     0.46     0.52\nB10 48.97 49.23 48.94   49.47   -0.54    0.33 49.12  -0.47   0.27     0.37     0.36\nC10  7.82  7.78  7.54    8.50    0.31   -0.47  7.77  -0.01   0.37     1.06     1.15\nD10 95.28 95.65 94.39   95.59   -0.82    2.21 95.44  -0.90   1.63     0.57     0.61\nE10 49.01 49.26 49.02   49.31   -0.53    0.32 49.16  -0.44   0.21     0.23     0.21\nF10  7.99  7.84  7.60    8.48    0.35   -0.61  7.87   0.16   0.44     1.14     1.23\nG10 95.30 95.61 94.31   95.49   -0.80    2.27 95.41  -0.82   1.71     0.52     0.57\nH10 49.11 49.33 49.08   49.36   -0.54    0.36 49.24  -0.40   0.24     0.26     0.21\nI10  8.24  8.02  7.59    9.01    0.38   -0.30  8.06   0.22   0.74     1.21     1.42\nJ10 95.55 95.90 94.74   95.59   -0.81    2.19 95.70  -0.85   1.49     0.65     0.70\nK10 49.12 49.33 49.08   49.38   -0.50    0.35 49.25  -0.39   0.25     0.23     0.20\nL10  8.26  8.05  7.57    9.15    0.49   -0.35  8.08   0.19   0.81     1.39     1.60\nM10 49.15 49.38 49.18   49.43   -0.54    0.31 49.29  -0.41   0.16     0.27     0.24\nN10 95.38 95.67 94.42   95.36   -0.79    2.31 95.48  -0.79   1.65     0.61     0.67\n\n\nBy comparing both results, what do we learn? These are lot’s of numbers to compare, so let’s try to break this down.\nThe most dramatic difference between reports is the large difference in the CIE2000 deltaE. Let’s create a plot to make that clear…\n\nbcol_deltaE_2000_SL_1 = bcol_df.loc[:, 'bcol_ΔE*00_(SL=1)'].values \ncc2c_deltaE_2000 = report.loc[:, 'dE_2000'].values\n\n\nimport matplotlib.pyplot as plt\n\n\nfig, ax = plt.subplots(figsize=[8, 4])\nax.plot(range(len(names)), bcol_deltaE_2000_SL_1, label='basiccolor (SL=1)')\nax.plot(range(len(names)), cc2c_deltaE_2000, label='colorchecker2cielab')\nax.set_ylabel('deltaE CIE 2000')\nax.set_xlabel('patch num')\nax.legend();\n\n..\n\n\n\nsource\n\nread_basiccolor_data\n\n read_basiccolor_data (basiccolor_excel)\n\nAd hoc code to parse from BasICColor excel report (based on html output) and return color values as dataframe.",
    "crumbs": [
      "Comparison with BasICColor"
    ]
  },
  {
    "objectID": "check-your-colorchecker.html",
    "href": "check-your-colorchecker.html",
    "title": "Check your Colorchecker",
    "section": "",
    "text": "If all you need is just to extract CIELAB values from your TIF image, the colorchecker2cielab package provides two quick ways to do so. The first way requires you to open a Jupyter notebook, import the cielab_extractor() function and run the command. The table with 140 CIELAB values is saved to an excel file in the same folder as the tif file.\n\nfrom colorchecker2cielab import cielab_extractor\n\n\ntif_file = '/home/frank/Work/DATA/colorchecker2cielab-data/sk-C-1833_135MB.tif' \nLABs = cielab_extractor(tif_file)\n\nWriting Colorchecker CIELAB values to excel file: \n'/home/frank/Work/DATA/colorchecker2cielab-data/sk-C-1833_135MB_CIELABs.xlsx'\n\n       L*     a*     b*\nA1  95.56  -0.76   2.22\nB1  49.37  -0.39   0.36\nC1   7.72   0.42   0.26\nD1  95.96  -0.89   1.92\nE1  49.36  -0.41   0.37\nF1   7.41   0.45   0.24\nG1  95.85  -0.95   1.88\nH1  49.37  -0.44   0.34\nI1   7.38   0.17   0.26\nJ1  95.91  -0.92   1.84\nK1  49.38  -0.42   0.28\nL1   7.58   0.50   0.63\nM1  49.43  -0.45   0.21\nN1  95.71  -0.90   1.94\nA2   7.52   0.31   0.18\nB2  34.13  50.45  -7.86\nC2  20.85  18.47 -17.83\nD2  84.09  -2.00  -8.32\nE2  31.60  17.65  20.30\nF2  64.88  19.02  18.97\nG2  46.09  -3.78 -24.90\nH2  37.79 -17.03  27.62\nI2  51.38   9.44 -26.60\nJ2  69.01 -34.89  -0.23\nK2  84.98  11.28  18.18\nL2  22.84  34.82  11.15\nM2  43.59  62.58  12.20\nN2  49.47  -0.43   0.20\nA3  49.29  -0.40   0.34\nB3  61.06  26.19 -17.85\nC3  41.20  18.23 -35.79\nD3  84.97  14.12   0.33\nE3  61.62  37.39  65.87\nF3  34.65  12.62 -49.61\nG3  48.88  53.23  23.29\nH3  21.54  31.19 -27.46\nI3  70.01 -23.55  58.67\nJ3  68.86  17.67  75.18\nK3  89.22 -16.52   5.53\nL3  46.04  67.03  52.94\nM3  19.14  33.14  -8.78\nN3   7.62   0.68   0.36\nA4  95.97  -0.85   1.79\nB4  29.55  48.09 -39.77\nC4  21.61  -2.32 -33.02\nD4  84.45 -19.22  -1.21\nE4  18.40  20.23 -53.94\nF4  53.49 -42.45  35.84\nG4  39.18  64.81  43.00\nH4  80.49   3.73  82.02\nI4  48.52  54.36 -12.03\nJ4  48.59 -31.13 -31.06\nK4  84.21   5.12  -6.56\nL4  61.20  35.36   4.75\nM4  42.97  65.42  33.08\nN4  96.19  -0.95   1.47\nA5   7.59   0.16  -0.00\nB5  49.95 -12.06 -47.67\nC5  60.48 -16.87 -32.28\nD5  84.68  12.86   7.75\nE5  95.99  -0.95   1.40\nF5  78.58   0.00   0.17\nG5  64.67  -0.41  -0.22\nH5  49.27  -0.39   0.28\nI5  34.78  -0.45   0.12\nJ5  15.77  -0.66  -0.92\nK5  83.65 -12.44  -8.77\nL5  62.59  35.89  18.50\nM5  55.30  70.03  54.01\nN5  49.44  -0.40   0.25\nA6  49.24  -0.43   0.27\nB6  60.91 -29.73 -26.49\nC6  23.25 -17.86 -17.08\nD6  83.06 -10.21  25.52\nE6   8.76   0.81   0.95\nF6  29.94   0.09   0.28\nG6  39.58  -0.39   0.31\nH6  59.96  -0.06  -0.18\nI6  74.20   0.21  -0.17\nJ6  87.36  -0.86  -0.84\nK6  69.72  -0.21  -0.53\nL6  65.14  51.87  77.47\nM6  80.28  24.14  84.24\nN6   8.09   0.90   0.92\nA7  95.57  -0.90   1.86\nB7  22.34 -25.77  -7.94\nC7  60.17  -4.92 -32.26\nD7  61.91  30.33  34.64\nE7  75.54  20.72  23.54\nF7  63.35  13.04  24.48\nG7  39.72  15.07  24.95\nH7  67.28  13.96  15.60\nI7  45.34  25.45  39.99\nJ7  63.03  24.93  26.02\nK7  45.10  -0.13   0.68\nL7  70.15 -11.09  81.78\nM7  79.20   6.09  92.96\nN7  95.94  -0.82   1.61\nA8   7.68  -0.02   0.21\nB8  60.90 -41.98 -13.15\nC8  52.91 -49.89 -11.48\nD8  64.82  19.63  17.65\nE8  73.02  29.96  25.73\nF8  64.05  13.40  17.53\nG8  64.97  15.46  16.35\nH8  65.40  15.95  17.88\nI8  36.08  14.89  25.93\nJ8  65.88  21.92  27.22\nK8  20.88  -0.41   0.33\nL8  60.77   2.51  53.26\nM8  69.84 -17.60  74.36\nN8  49.37  -0.42   0.24\nA9  49.04  -0.43   0.19\nB9  20.06   0.29  13.53\nC9  60.68 -40.05  19.59\nD9  52.14 -52.38  14.36\nE9  22.38 -22.94   5.39\nF9  60.87 -43.06   7.34\nG9  59.38 -27.68  38.72\nH9  51.37 -49.13  43.81\nI9  61.26 -52.41  45.63\nJ9  60.56  16.21  49.58\nK9  60.35 -13.93  52.70\nL9  70.34 -28.77  72.57\nM9  22.94  12.77  19.35\nN9   8.01   0.43   0.53\nA10 95.19  -0.91   1.87\nB10 49.12  -0.47   0.27\nC10  7.77  -0.01   0.37\nD10 95.44  -0.90   1.63\nE10 49.16  -0.44   0.21\nF10  7.87   0.16   0.44\nG10 95.41  -0.82   1.71\nH10 49.24  -0.40   0.24\nI10  8.06   0.22   0.74\nJ10 95.70  -0.85   1.49\nK10 49.25  -0.39   0.25\nL10  8.08   0.19   0.81\nM10 49.29  -0.41   0.16\nN10 95.48  -0.79   1.65\n\n\nThe second way to achieve this is even more simple. All you need is to open a terminal from the folder with the tif file run the cielab_extractor command with the name of the tif file that you want ato analyze.\n$ cielab_extractor sk-C-1833_135MB.tif\nThat is all. If you are curious how all this works, then read the next sections.\n\nsource\n\ncielab_extractor\n\n cielab_extractor (tif_file, write_excel=True, verbose=True)\n\n*Extract RGB values from color patches in tif_file and convert to CIELAB values table.\nReturns a pandas dataframe with 140 CIELAB values.*",
    "crumbs": [
      "Check your Colorchecker"
    ]
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Welcome to colorchecker2cielab",
    "section": "",
    "text": "Professional photographers working for cultural heritage institutions take effort to produce color calibrated images. This is achieved by photographing a standard color target and accordingly adjust color values of subsequent images taken with the same camera + lights setup. This process is called color management. Due to the complexity of color management it is quite possible to make a mistake. For this reason, it is important to have the possibility to check if the color values of the color managed TIF image of the color target are in agreement with the tabulated values for the color target. Until recently an online service provided by Picturae was available to photographers to upload their TIF images for such a check. Unfortunately this service is no longer available.\nThis tiny python package colorchecker2cielab with a long name is developed to provide a quick way to automatically extract CIELAB color values from a TIF image of a Digital Colorchecker SG target.\nThis package is under development. Documentation and code can already be found on github and on the Python Package index.",
    "crumbs": [
      "Welcome to colorchecker2cielab"
    ]
  },
  {
    "objectID": "extracting-rgb-values.html",
    "href": "extracting-rgb-values.html",
    "title": "Extracting RGB values",
    "section": "",
    "text": "In case you want to try the colorchecker2cielab package, but you do not have a color managed TIF image of a Digital Colorchecker target at hand, you can download our example TIF file with the download() function. Here is what the image looks like.\n\nfrom colorchecker2cielab import download\n\n\ndownload_dir = '../downloads' # replace with your own directory (should exist)\ndownload(download_dir)\n\n..\n\n\nLet’s see if now we can open the tif image and extract the RGB values for each color patch. This is done automatically with the function extract_color_patches().\n\nfrom colorchecker2cielab import extract_color_patches\n\n\ntif_file = '/home/frank/Work/DATA/colorchecker2cielab-data/sk-C-1833_135MB.tif'\n\n\nrectangles, RGBs = extract_color_patches(tif_file)\n\n\n\n\n\n\n\n\n\nRGBs\n\n\n\n\n\n\n\n\nR\nG\nB\n\n\n\n\nA1\n0.955448\n0.957560\n0.941383\n\n\nB1\n0.492653\n0.494630\n0.491376\n\n\nC1\n0.079232\n0.076354\n0.075660\n\n\nD1\n0.958493\n0.961770\n0.947223\n\n\nE1\n0.492466\n0.494535\n0.491158\n\n\n...\n...\n...\n...\n\n\nJ10\n0.955527\n0.959005\n0.947354\n\n\nK10\n0.491213\n0.493347\n0.490840\n\n\nL10\n0.082601\n0.080506\n0.075738\n\n\nM10\n0.491507\n0.493843\n0.491844\n\n\nN10\n0.953783\n0.956727\n0.944197\n\n\n\n\n140 rows × 3 columns\n\n\n\nIf you want to see all 140 rows of the dataframe you can execute the following code.\nTo build this function a have made use of the powerful python package for image processing scikit-image.\nTODO: Explain the steps in the extraction process.\n\nsource\n\ndownload\n\n download (download_dir=None)\n\n*Download demo TIF image of Digital Colorchecker SG target to download_dir.\nIf download_dir is not specified, the current working directory is used. Otherwise, an existing directory should be used.*\n\nsource\n\n\nextract_color_patches\n\n extract_color_patches (tif_file, nrows=10, ncols=14, make_plot=True)",
    "crumbs": [
      "Extracting RGB values"
    ]
  },
  {
    "objectID": "a-dive-into-cie2000.html",
    "href": "a-dive-into-cie2000.html",
    "title": "A dive into deltaE CIE2000",
    "section": "",
    "text": "The most recent Metamorfoze standard (ref?) prescribes that for assessing color differences one should use the newest CIE2000 deltaE formula, with the addition that SL=1. So far I managed to avoid the complexities of CIE2000, but it seems that now we can longer ignore its inner workings. Here is the formula for the CIE 2000 color difference.\n\\[ \\Delta E^*_{00} = \\sqrt{\\left(\\frac{\\Delta L'}{k_L \\color{red}{S_L} }\\right)^2 + \\left(\\frac{\\Delta C'}{k_C S_C}\\right)^2 + \\left(\\frac{\\Delta H'}{k_H S_H }\\right)^2  + \\left(R_T \\left(\\frac{\\Delta C'}{K_C S_C}\\right) \\left(\\frac{\\Delta H'}{k_H S_H}\\right)\\right)} \\]\nThe important thing to note here is that we find indeed a coefficient SL in the denominator of the first term. Note that this coefficient is not constant but a function that depends on the CIELAB inputs! Further specification of the variables in this formula in terms of CIELAB input values would require 27 more lines of math. If you are curious, see the Math &gt; DeltaE (CIE 2000) section of www.brucelindbloom.com.\nTo study the effect of setting SL=1, I created the delta_E_CIE2000_adapted() function. Let’s see if we can now replicate the BasICColor Metamorfoze (SL=1) report values…\n\nfrom colorchecker2cielab import delta_E_CIE2000_adapted, read_basiccolor_data \nimport pandas as pd\n\n\n# read BasICColor report data \nbcol_data = '/home/frank/Work/DATA/colorchecker2cielab-data/BasiCColor_sk-c-1833.xlsx'\nbcol_df = read_basiccolor_data(bcol_data)\n\n\n# select CIELAB values needed to compute deltaE \nref_LABs = bcol_df.loc[:, ['ref_L*', 'ref_a*', 'ref_b*']].values\nbcol_LABs = bcol_df.loc[:, ['bcol_L*', 'bcol_a*', 'bcol_b*']].values\n\nbcol_deltaE_SL1 = bcol_df.loc[:, ['bcol_ΔE*00_(SL=1)']]\n\n\ncomputed_deltaE_SL1 = delta_E_CIE2000_adapted(ref_LABs, bcol_LABs, metamorfoze_SL_is_one=True)\ncompare_df = bcol_deltaE_SL1\ncompare_df['computed'] = computed_deltaE_SL1\npd.options.display.float_format = '{:,.2f}'.format \nprint(compare_df.to_string());\n\n     bcol_ΔE*00_(SL=1)  computed\nA1                0.77      0.76\nB1                1.05      1.05\nC1                1.97      1.97\nD1                0.68      0.68\nE1                1.00      1.00\nF1                2.24      2.24\nG1                0.67      0.67\nH1                0.98      0.98\nI1                2.05      2.05\nJ1                0.64      0.63\nK1                1.01      1.02\nL1                2.70      2.70\nM1                0.94      0.93\nN1                0.69      0.69\nA2                2.28      2.28\nB2                1.77      1.77\nC2                1.19      1.19\nD2                1.03      1.03\nE2                1.04      1.05\nF2                1.55      1.55\nG2                0.82      0.82\nH2                0.49      0.49\nI2                1.11      1.11\nJ2                1.28      1.28\nK2                0.74      0.75\nL2                1.73      1.73\nM2                1.48      1.49\nN2                0.94      0.94\nA3                1.09      1.09\nB3                0.62      0.61\nC3                1.19      1.20\nD3                0.58      0.58\nE3                1.15      1.15\nF3                1.86      1.86\nG3                1.79      1.79\nH3                0.82      0.82\nI3                1.47      1.47\nJ3                1.01      1.01\nK3                1.03      1.04\nL3                2.24      2.25\nM3                0.70      0.69\nN3                2.26      2.26\nA4                0.76      0.76\nB4                0.90      0.90\nC4                0.62      0.62\nD4                0.66      0.65\nE4                1.82      1.82\nF4                2.06      2.05\nG4                1.98      1.98\nH4                1.69      1.69\nI4                1.45      1.45\nJ4                2.02      2.02\nK4                0.71      0.71\nL4                1.16      1.15\nM4                1.80      1.80\nN4                0.82      0.83\nA5                1.58      1.58\nB5                1.66      1.66\nC5                1.05      1.04\nD5                0.42      0.43\nE5                0.64      0.64\nF5                0.94      0.94\nG5                1.02      1.02\nH5                1.02      1.02\nI5                1.04      1.04\nJ5                1.36      1.36\nK5                0.89      0.89\nL5                1.33      1.33\nM5                2.09      2.09\nN5                1.03      1.04\nA6                1.03      1.03\nB6                0.88      0.88\nC6                1.82      1.82\nD6                1.44      1.43\nE6                2.08      2.08\nF6                1.03      1.04\nG6                1.08      1.08\nH6                1.05      1.05\nI6                0.93      0.93\nJ6                0.77      0.77\nK6                0.94      0.94\nL6                1.74      1.74\nM6                1.94      1.94\nN6                2.59      2.58\nA7                0.67      0.67\nB7                4.11      4.11\nC7                0.93      0.93\nD7                1.12      1.12\nE7                1.01      1.00\nF7                1.02      1.03\nG7                3.99      3.99\nH7                0.75      0.75\nI7                0.60      0.60\nJ7                0.52      0.52\nK7                1.08      1.08\nL7                2.21      2.21\nM7                2.14      2.14\nN7                0.77      0.76\nA8                1.71      1.71\nB8                1.80      1.80\nC8                3.17      3.17\nD8                1.43      1.43\nE8                0.76      0.76\nF8                0.46      0.46\nG8                0.78      0.78\nH8                1.08      1.08\nI8                0.87      0.87\nJ8                0.50      0.49\nK8                0.80      0.80\nL8                1.01      1.02\nM8                1.88      1.89\nN8                0.98      0.97\nA9                0.98      0.99\nB9                1.92      1.91\nC9                1.15      1.15\nD9                1.92      1.92\nE9                1.82      1.82\nF9                1.64      1.64\nG9                0.94      0.94\nH9                0.86      0.86\nI9                0.68      0.68\nJ9                0.92      0.92\nK9                1.47      1.46\nL9                2.11      2.11\nM9                3.01      3.01\nN9                2.21      2.21\nA10               0.64      0.64\nB10               0.99      0.99\nC10               1.61      1.61\nD10               0.58      0.59\nE10               0.99      0.99\nF10               1.72      1.72\nG10               0.66      0.66\nH10               1.01      1.01\nI10               1.88      1.89\nJ10               0.66      0.66\nK10               0.97      0.97\nL10               2.03      2.03\nM10               1.02      1.01\nN10               0.72      0.71\n\n\nConclusion is that we can indeed replicate the CIE2000(SL=1) deltaE values.\nHowever, I can’t see yet why we should follow the Metamorfoze Standard recommendation…\n\nsource\n\ndelta_E_CIE2000_adapted\n\n delta_E_CIE2000_adapted (Lab_1, Lab_2, textiles=False,\n                          metamorfoze_SL_is_one=False)\n\nReturn the difference :math:\\Delta E_{00} between two given CIE L*a*b** colourspace arrays using CIE 2000 recommendation.\nADAPTED BY FRANK LIGTERINK TO INCLUDE THE CURIOUS OPTION: metamorfoze_SL_is_one*\n\n\n\n\n\n\n\n\n\n\nType\nDefault\nDetails\n\n\n\n\nLab_1\n\n\nCIE L*a*b* colourspace array 1.\n\n\nLab_2\n\n\nCIE L*a*b* colourspace array 2.\n\n\ntextiles\nbool\nFalse\nTextiles application specific parametric factors.:math:k_L=2,\\ k_C=k_H=1 weights are used instead of:math:k_L=k_C=k_H=1.\n\n\nmetamorfoze_SL_is_one\nbool\nFalse\n\n\n\nReturns\n:class:numpy.ndarray\n\nColour difference :math:\\Delta E_{00}.",
    "crumbs": [
      "A dive into deltaE CIE2000"
    ]
  },
  {
    "objectID": "computing-cielab-values-from-rgb.html",
    "href": "computing-cielab-values-from-rgb.html",
    "title": "Computing CIELAB values from RGB",
    "section": "",
    "text": "Extracting the RGB values for all color patches from the TIF image of the Digital Colorchecker target has been straightforward. Now we get to the gory details of color management…\n\n\nCode\nfrom colorchecker2cielab import extract_color_patches\n\n\n\n\nCode\ntif_file = '/home/frank/Work/DATA/colorchecker2cielab-data/sk-C-1833_135MB.tif' \nrectangles, RGBs = extract_color_patches(tif_file, make_plot=False)\n\n\nWhile developing this python package I learned about several tricky details that I needed to grasp in order to compute accurate CIELAB color coordinates. These lessons learned are implemented in the RGBs_to_LABs() function as follows:\nECI_RGB_V2 = colour.models.RGB_COLOURSPACE_ECI_RGB_V2 \nilluminant = ECI_RGB_V2.whitepoint # D50 \nECI_RGB_V2.use_derived_transformation_matrices = True \nXYZs = colour.RGB_to_XYZ(RGBs, ECI_RGB_V2, apply_cctf_decoding=True)\nLABs = colour.XYZ_to_Lab(XYZs, illuminant=illuminant) \nLet’s discuss these code lines one by one. Line 1 instantiates the ECI RGB v2 color space whose properties (RGB primaries etc.) we need to calculate CIELAB color coordinates from RGB values. In line 2 we extract the chromaticity coordinates (x, y) for the D50 white point that we will need below.\nIn line 3 we set the color space attribute .use_derived_transformation_matrices to True. This is related to the following issue described in the colour-science package documentation:\n\nColour science literature related to RGB colourspaces and encodings defines their dataset using different degree of precision or rounding. While instances where a whitepoint is being defined with a value different from its canonical agreed one are rare, it is however very common to have normalised primary matrices rounded at different decimals. This can yield large discrepancies in computations.*\n\nThe default for this option is False. We will want to maximize the precision, therefore we explicitly need to set this attribute to True.\nIn line 4 we first calculate the CIE XYZ tristimulus color coordinates with the RGB_to_XYZ() function. To do this correctly we need to set the apply_cctf_decoding option to True because the non-linear RGB coordinates in the TIFF need to be decoded (=linearized) as a first step. This is is done with the CIE L* luminance function as prescribed by the ECI RGB v2 color model.\nIn line 5 we convert the XYZ tristimulus values into CIELAB coordinates with the XYZ_to_Lab() function. The default illuminant for the function is D65. Therefore we explicitly need to set the illuminant option to the D50 white point. I now understand that CIELAB coordinates are defined relative to a white point!\n\nfrom colorchecker2cielab import RGBs_to_LABs, read_target_data, compute_deltaEs\n\n\ntarget_txt_file = '/home/frank/Work/DATA/colorchecker2cielab-data/AG_003_20221230_2.txt' \n\ntif_LABs = RGBs_to_LABs(RGBs)\ntarget_LABS = read_target_data(target_txt_file)\n\n\nboth = compute_deltaEs(target_LABS, tif_LABs)\nprint(both.to_string())\n\n     ref_L*  ref_a*  ref_b*    L*     a*     b*  dE_2000  dE_1976\nA1    95.35   -0.75    2.56 95.56  -0.76   2.22     0.33     0.40\nB1    49.51   -0.53    0.38 49.37  -0.39   0.36     0.24     0.20\nC1     8.59    0.26   -0.70  7.72   0.42   0.26     1.11     1.30\nD1    95.62   -0.80    2.35 95.96  -0.89   1.92     0.46     0.55\nE1    49.53   -0.54    0.41 49.36  -0.41   0.37     0.26     0.22\nF1     8.47    0.16   -0.86  7.41   0.45   0.24     1.34     1.56\nG1    95.50   -0.82    2.40 95.85  -0.95   1.88     0.56     0.64\nH1    49.53   -0.54    0.44 49.37  -0.44   0.34     0.24     0.22\nI1     8.44    0.27   -0.82  7.38   0.17   0.26     1.26     1.52\nJ1    95.63   -0.81    2.34 95.91  -0.92   1.84     0.52     0.59\nK1    49.46   -0.55    0.34 49.38  -0.42   0.28     0.21     0.16\nL1     9.55    0.36   -0.45  7.58   0.50   0.63     1.63     2.25\nM1    49.37   -0.53    0.33 49.43  -0.45   0.21     0.18     0.16\nN1    95.34   -0.80    2.46 95.71  -0.90   1.94     0.55     0.64\nA2     9.05    0.24   -0.89  7.52   0.31   0.18     1.42     1.87\nB2    33.06   51.60  -10.48 34.13  50.45  -7.86     1.49     3.06\nC2    19.99   20.10  -18.86 20.85  18.47 -17.83     1.11     2.11\nD2    83.60   -2.18   -8.35 84.09  -2.00  -8.32     0.40     0.52\nE2    32.14   19.46   22.48 31.60  17.65  20.30     1.33     2.88\nF2    63.36   20.01   19.98 64.88  19.02  18.97     1.42     2.08\nG2    45.82   -3.99  -25.32 46.09  -3.78 -24.90     0.39     0.54\nH2    38.10  -16.74   29.18 37.79 -17.03  27.62     0.87     1.62\nI2    51.22    9.39  -27.35 51.38   9.44 -26.60     0.53     0.77\nJ2    68.08  -35.24   -0.89 69.01 -34.89  -0.23     0.86     1.19\nK2    84.76   10.96   17.84 84.98  11.28  18.18     0.31     0.52\nL2    21.66   35.94    9.72 22.84  34.82  11.15     1.39     2.17\nM2    42.18   63.63   11.97 43.59  62.58  12.20     1.34     1.77\nN2    49.42   -0.54    0.39 49.47  -0.43   0.20     0.26     0.23\nA3    49.49   -0.56    0.33 49.29  -0.40   0.34     0.30     0.25\nB3    60.96   26.65  -18.39 61.06  26.19 -17.85     0.32     0.71\nC3    41.38   18.14  -36.85 41.20  18.23 -35.79     0.68     1.08\nD3    84.50   14.49    0.52 84.97  14.12   0.33     0.44     0.63\nE3    61.35   37.18   68.91 61.62  37.39  65.87     1.15     3.06\nF3    34.80   11.99  -51.74 34.65  12.62 -49.61     1.36     2.23\nG3    47.29   53.15   22.33 48.88  53.23  23.29     1.64     1.86\nH3    21.60   32.81  -28.91 21.54  31.19 -27.46     0.75     2.17\nI3    70.39  -25.76   64.39 70.01 -23.55  58.67     1.57     6.14\nJ3    69.68   18.58   78.96 68.86  17.67  75.18     1.06     3.97\nK3    88.42  -17.05    6.35 89.22 -16.52   5.53     0.80     1.26\nL3    44.00   66.29   51.04 46.04  67.03  52.94     2.04     2.89\nM3    19.20   34.85   -7.48 19.14  33.14  -8.78     1.08     2.15\nN3     8.69    0.32   -0.71  7.62   0.68   0.36     1.34     1.55\nA4    95.57   -0.80    2.24 95.97  -0.85   1.79     0.49     0.60\nB4    29.88   50.17  -41.86 29.55  48.09 -39.77     0.81     2.96\nC4    21.10   -1.20  -34.33 21.61  -2.32 -33.02     0.68     1.80\nD4    83.97  -19.35   -1.10 84.45 -19.22  -1.21     0.34     0.51\nE4    19.29   23.34  -59.46 18.40  20.23 -53.94     1.48     6.39\nF4    51.70  -44.14   39.12 53.49 -42.45  35.84     2.10     4.10\nG4    37.28   65.62   42.67 39.18  64.81  43.00     1.68     2.09\nH4    80.85    2.30   88.86 80.49   3.73  82.02     1.70     6.99\nI4    48.07   56.26  -14.81 48.52  54.36 -12.03     1.31     3.40\nJ4    46.67  -32.13  -30.93 48.59 -31.13 -31.06     1.94     2.17\nK4    83.82    5.10   -6.02 84.21   5.12  -6.56     0.50     0.66\nL4    60.42   35.97    3.89 61.20  35.36   4.75     0.90     1.31\nM4    41.17   65.74   33.22 42.97  65.42  33.08     1.63     1.83\nN4    95.60   -0.82    2.23 96.19  -0.95   1.47     0.82     0.97\nA5     8.47    0.30   -0.70  7.59   0.16  -0.00     0.90     1.13\nB5    49.04  -13.81  -49.04 49.95 -12.06 -47.67     1.42     2.40\nC5    59.80  -17.93  -31.89 60.48 -16.87 -32.28     0.87     1.32\nD5    84.45   13.18    7.80 84.68  12.86   7.75     0.29     0.40\nE5    95.65   -0.85    2.11 95.99  -0.95   1.40     0.71     0.79\nF5    78.75   -0.08    0.35 78.58   0.00   0.17     0.25     0.26\nG5    64.83   -0.45   -0.33 64.67  -0.41  -0.22     0.18     0.19\nH5    49.28   -0.54    0.35 49.27  -0.39   0.28     0.22     0.16\nI5    34.37   -0.44    0.00 34.78  -0.45   0.12     0.36     0.43\nJ5    15.18   -0.88   -1.12 15.77  -0.66  -0.92     0.53     0.66\nK5    82.98  -12.66   -8.83 83.65 -12.44  -8.77     0.48     0.71\nL5    61.75   37.11   17.62 62.59  35.89  18.50     1.16     1.72\nM5    53.63   67.17   50.15 55.30  70.03  54.01     1.98     5.08\nN5    49.37   -0.52    0.33 49.44  -0.40   0.25     0.20     0.16\nA6    49.44   -0.54    0.31 49.24  -0.43   0.27     0.26     0.24\nB6    60.10  -30.10  -26.67 60.91 -29.73 -26.49     0.72     0.91\nC6    21.55  -17.05  -17.59 23.25 -17.86 -17.08     1.38     1.95\nD6    83.32  -11.78   26.26 83.06 -10.21  25.52     1.08     1.75\nE6     8.76    0.43   -0.29  8.76   0.81   0.95     1.32     1.30\nF6    29.30    0.13    0.28 29.94   0.09   0.28     0.49     0.64\nG6    39.19   -0.49    0.25 39.58  -0.39   0.31     0.38     0.41\nH6    59.75   -0.17   -0.19 59.96  -0.06  -0.18     0.25     0.24\nI6    74.59    0.21   -0.09 74.20   0.21  -0.17     0.30     0.40\nJ6    87.36   -0.86   -0.35 87.36  -0.86  -0.84     0.47     0.49\nK6    69.99   -0.24   -0.52 69.72  -0.21  -0.53     0.21     0.27\nL6    63.63   51.26   79.10 65.14  51.87  77.47     1.47     2.31\nM6    81.85   22.67   85.56 80.28  24.14  84.24     1.48     2.52\nN6     8.88    0.37   -0.59  8.09   0.90   0.92     1.72     1.78\nA7    95.44   -0.85    2.37 95.57  -0.90   1.86     0.49     0.53\nB7    18.23  -25.24   -7.58 22.34 -25.77  -7.94     2.87     4.16\nC7    59.96   -5.50  -32.60 60.17  -4.92 -32.26     0.52     0.70\nD7    61.97   29.60   36.28 61.91  30.33  34.64     1.15     1.80\nE7    75.73   19.54   22.65 75.54  20.72  23.54     0.68     1.49\nF7    62.78   13.06   26.02 63.35  13.04  24.48     0.95     1.64\nG7    43.65   15.72   26.96 39.72  15.07  24.95     3.67     4.46\nH7    66.86   13.99   16.71 67.28  13.96  15.60     0.81     1.18\nI7    44.81   25.79   40.65 45.34  25.45  39.99     0.55     0.91\nJ7    63.42   25.00   26.80 63.03  24.93  26.02     0.54     0.87\nK7    44.45   -0.12    0.63 45.10  -0.13   0.68     0.61     0.65\nL7    72.21  -11.41   87.21 70.15 -11.09  81.78     1.94     5.81\nM7    81.23    5.33   95.11 79.20   6.09  92.96     1.54     3.06\nN7    95.64   -0.80    2.24 95.94  -0.82   1.61     0.61     0.70\nA8     8.42    0.29   -0.77  7.68  -0.02   0.21     1.17     1.27\nB8    59.18  -40.97  -13.40 60.90 -41.98 -13.15     1.58     2.01\nC8    49.75  -48.87  -11.43 52.91 -49.89 -11.48     3.16     3.32\nD8    63.44   20.85   18.90 64.82  19.63  17.65     1.40     2.23\nE8    73.40   29.02   25.35 73.02  29.96  25.73     0.50     1.08\nF8    63.79   13.74   17.48 64.05  13.40  17.53     0.36     0.43\nG8    64.25   15.57   16.61 64.97  15.46  16.35     0.61     0.77\nH8    64.35   16.61   18.82 65.40  15.95  17.88     1.03     1.56\nI8    35.64   16.70   27.67 36.08  14.89  25.93     1.21     2.55\nJ8    65.83   21.96   28.22 65.88  21.92  27.22     0.54     1.00\nK8    20.24   -0.10    0.42 20.88  -0.41   0.33     0.65     0.72\nL8    61.58    2.86   56.24 60.77   2.51  53.26     1.12     3.11\nM8    71.57  -18.77   77.61 69.84 -17.60  74.36     1.54     3.86\nN8    49.31   -0.53    0.35 49.37  -0.42   0.24     0.20     0.17\nA9    49.34   -0.54    0.35 49.04  -0.43   0.19     0.38     0.36\nB9    19.10    1.60   12.31 20.06   0.29  13.53     2.03     2.03\nC9    59.68  -40.69   19.57 60.68 -40.05  19.59     0.91     1.19\nD9    50.40  -53.33   13.94 52.14 -52.38  14.36     1.78     2.02\nE9    20.57  -23.24    5.67 22.38 -22.94   5.39     1.29     1.85\nF9    59.26  -43.65    7.36 60.87 -43.06   7.34     1.43     1.72\nG9    59.79  -29.07   39.25 59.38 -27.68  38.72     0.69     1.55\nH9    50.73  -49.58   43.54 51.37 -49.13  43.81     0.68     0.83\nI9    60.99  -54.10   46.27 61.26 -52.41  45.63     0.53     1.83\nJ9    61.30   16.26   51.36 60.56  16.21  49.58     0.88     1.92\nK9    61.68  -14.73   53.90 60.35 -13.93  52.70     1.25     1.96\nL9    72.26  -29.51   71.44 70.34 -28.77  72.57     1.57     2.35\nM9    20.74   13.45   16.79 22.94  12.77  19.35     2.52     3.44\nN9     9.18    0.36   -0.68  8.01   0.43   0.53     1.39     1.68\nA10   95.45   -0.82    2.31 95.19  -0.91   1.87     0.46     0.52\nB10   49.47   -0.54    0.33 49.12  -0.47   0.27     0.37     0.36\nC10    8.50    0.31   -0.47  7.77  -0.01   0.37     1.06     1.15\nD10   95.59   -0.82    2.21 95.44  -0.90   1.63     0.57     0.61\nE10   49.31   -0.53    0.32 49.16  -0.44   0.21     0.23     0.21\nF10    8.48    0.35   -0.61  7.87   0.16   0.44     1.14     1.23\nG10   95.49   -0.80    2.27 95.41  -0.82   1.71     0.52     0.57\nH10   49.36   -0.54    0.36 49.24  -0.40   0.24     0.26     0.21\nI10    9.01    0.38   -0.30  8.06   0.22   0.74     1.21     1.42\nJ10   95.59   -0.81    2.19 95.70  -0.85   1.49     0.65     0.70\nK10   49.38   -0.50    0.35 49.25  -0.39   0.25     0.23     0.20\nL10    9.15    0.49   -0.35  8.08   0.19   0.81     1.39     1.60\nM10   49.43   -0.54    0.31 49.29  -0.41   0.16     0.27     0.24\nN10   95.36   -0.79    2.31 95.48  -0.79   1.65     0.61     0.67\n\n\n\nsource\n\ncompute_deltaEs\n\n compute_deltaEs (target_LABs, tif_LABs)\n\nComputes color differences according to CIE2000 and CIE1976.\n\nsource\n\n\nRGBs_to_LABs\n\n RGBs_to_LABs (RGBs, use_derived_transformation_matrices=True)\n\n*Convert RGB values dataframe into CIELAB values dataframe assuming ECI_RGB_v2 colour space.\nIf the option use_derived_transformation_matricesis true (default) then high precision matrices are used for the computation. If set to false, matrices values as described in the standards are used.*\n\nsource\n\n\nread_target_data\n\n read_target_data (target_txt_file, verbose=False)\n\nRead measured CIELAB values from text file for specific Colorchecker target.",
    "crumbs": [
      "Computing CIELAB values from RGB"
    ]
  },
  {
    "objectID": "getting-started.html",
    "href": "getting-started.html",
    "title": "Getting started with Python",
    "section": "",
    "text": "In order to make full use of colorchecker2cielab, you need to be able to install Python packages and run Python code in Jupyter notebooks on your computer. The quickest and easiest way to get started with Jupyter notebooks is by downloading and installing the JupyterLab Desktop (JLD) installer for your operating system from the official github repository.\n\n\n\n\n\n\n\nNote\n\n\n\nThe first time you start JupyterLab Desktop you additionally need to install the default Python environment from the start menu. To do so you need to hoover and click on the word ‘install’ on the bottom of the start up screen.\n\n\nFinally you can install or update (with the -U option) the colorchecker2cielab package from the Python Package index pypi.org by executing this command from a code cell in a Jupyter notebook:\n%pip install -U colorchecker2cielab \nFor more information about JupyterLab Desktop see the JLD user guide.\nThat is it! You now are ready to open up your extract your CIELAB values!",
    "crumbs": [
      "Getting started with Python"
    ]
  }
]